<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="stylesheet" href="/styles.40ffa7bc2514c1c30336.css"/><meta name="generator" content="Gatsby"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#444"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><title data-rh="true">Go语言的方法Receiver使用Pointer还是Value？</title><meta data-rh="true" name="description" content="TL;DR 方法的 receiver 通常使用 pointer。如果不确定用什么，就用 pointer。（参考Go Code Review Guidelines - Receiver Type） slices，maps，channels，strings，functions…"/><meta data-rh="true" property="og:description" content="TL;DR 方法的 receiver 通常使用 pointer。如果不确定用什么，就用 pointer。（参考Go Code Review Guidelines - Receiver Type） slices，maps，channels，strings，functions…"/><meta data-rh="true" name="twitter:description" content="TL;DR 方法的 receiver 通常使用 pointer。如果不确定用什么，就用 pointer。（参考Go Code Review Guidelines - Receiver Type） slices，maps，channels，strings，functions…"/><meta data-rh="true" name="image" content="https://www.gatsbyjs.org/static/5324c726778fde0d298073712463307a/460e9/avatar.png"/><meta data-rh="true" property="og:image" content="https://www.gatsbyjs.org/static/5324c726778fde0d298073712463307a/460e9/avatar.png"/><meta data-rh="true" name="twitter:image" content="https://www.gatsbyjs.org/static/5324c726778fde0d298073712463307a/460e9/avatar.png"/><meta data-rh="true" property="og:site_name" content="Ziyi&#x27;s cabin"/><meta data-rh="true" property="og:type" content="article"/><meta data-rh="true" property="article:author" content="Ziyi Yan"/><meta data-rh="true" property="og:url" content="https://www.gatsbyjs.org/pointer-receiver-or-value-receiver-in-go"/><meta data-rh="true" name="keywords" content="golang"/><meta data-rh="true" property="og:locale" content="zh-cn"/><meta data-rh="true" name="twitter:card" content="summary"/><meta data-rh="true" name="twitter:title" content="Go语言的方法Receiver使用Pointer还是Value？"/><meta data-rh="true" property="og:title" content="Go语言的方法Receiver使用Pointer还是Value？"/><link as="script" rel="preload" href="/webpack-runtime-dbbee36b93e0b48fd1e8.js"/><link as="script" rel="preload" href="/app-263721de997ffae00c0a.js"/><link as="script" rel="preload" href="/styles-47484ca0e7b1cc8f32f2.js"/><link as="script" rel="preload" href="/commons-8c983014ac1912b8cf32.js"/><link as="script" rel="preload" href="/component---src-post-index-tsx-3c602ad3561b9a91c46a.js"/><link as="fetch" rel="preload" href="/page-data/pointer-receiver-or-value-receiver-in-go/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather+Sans:300,300i,400|Raleway:300&amp;display=swap"/></head><body itemscope="" itemType="http://schema.org/WebPage" lang="zh-cn"><noscript>This app works even with JavsScript disabled, be cool.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><noscript><style>.complex-player {
              visibility: visible !important
            }</style></noscript><div class="container--17Q11 hidden--10gQr"><img src=""/></div><div class="layout--3hCBa "><header class="header--1a4G4"></header><header class="static-side--3E7CT header--2dfCI" id="header" itemscope="" itemType="http://schema.org/WPHeader"><a class="link--3Q175 title--2hBhH" rel="start" href="/">Ziyi&#x27;s cabin</a><button class="header-button--14wFO"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"></path></svg></button><nav class="menu--swfnG" style="display:none"><a class="link--3Q175 menu-link--1VTkB" rel="section" href="/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"></path></svg> <!-- -->首页</a><a class="link--3Q175 menu-link--1VTkB" rel="section" href="/tags"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg> <!-- -->标签</a><a class="link--3Q175 menu-link--1VTkB" rel="section" href="/archive"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"></path></svg> <!-- -->归档</a><a class="link--3Q175 menu-link--1VTkB" rel="section" href="/about"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 288c79.5 0 144-64.5 144-144S335.5 0 256 0 112 64.5 112 144s64.5 144 144 144zm128 32h-55.1c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16H128C57.3 320 0 377.3 0 448v16c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48v-16c0-70.7-57.3-128-128-128z"></path></svg> <!-- -->关于</a></nav></header><div class="container--8MAbY"><main class="main--1gucz"><article class="article--1MMa2" itemscope="" itemType="http://schema.org/Article"><header class="header--2T1hV"><h1 class="title" itemProp="name headline">Go语言的方法Receiver使用Pointer还是Value？</h1><span class="stat--1WRzd"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M148 288h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"></path></svg> 发表于 <time dateTime="2019-04-19" itemProp="dateCreated datePublished">2019-04-19</time></span><span class="line--35b-H"></span><span class="stat--1WRzd"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M400 64h-48V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v52H160V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v52H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 400H54a6 6 0 0 1-6-6V160h352v298a6 6 0 0 1-6 6zm-52.849-200.65L198.842 404.519c-4.705 4.667-12.303 4.637-16.971-.068l-75.091-75.699c-4.667-4.705-4.637-12.303.068-16.971l22.719-22.536c4.705-4.667 12.303-4.637 16.97.069l44.104 44.461 111.072-110.181c4.705-4.667 12.303-4.637 16.971.068l22.536 22.718c4.667 4.705 4.636 12.303-.069 16.97z"></path></svg> 更新于 <time dateTime="2020-03-06" itemProp="dateModified">2020-03-06</time></span><span class="line--35b-H"></span><span class="stat--1WRzd"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"></path></svg> 阅读时长 4 分钟</span></header><link itemProp="mainEntityOfPage" href="https://www.gatsbyjs.org/pointer-receiver-or-value-receiver-in-go"/><a hidden="" href="/about" rel="author">Ziyi Yan</a><div class="content" id="content"><h2 id="tldr" style="position:relative;">TL;DR</h2>
<ul>
<li>方法的 receiver 通常使用 pointer。如果不确定用什么，就用 pointer。（参考<a href="https://github.com/golang/go/wiki/CodeReviewComments#receiver-type" target="_blank" rel="nofollow noopener noreferrer">Go Code Review Guidelines - Receiver Type</a>）</li>
<li>slices，maps，channels，strings，functions value，interface 的内部实现使用了 pointer，所以不需要使用指向这些类型的 pointer 来避免 copy。</li>
<li>对于很大的 struct 或者需要修改其内容的 struct，使用 pointer。否则，使用 value。</li>
</ul>
<h2 id="经常会使用-pointer-的情况" style="position:relative;">经常会使用 pointer 的情况</h2>
<ul>
<li>一个方法的参数可能有各种不同的情况，但是方法的 receiver 一般都是 pointer。方法通常都会对 receiver 做修改，并且 receiver struct 的 size 一般都比较大。</li>
</ul>
<h2 id="可以不使用-pointer-的情况" style="position:relative;">可以不使用 pointer 的情况</h2>
<ul>
<li>根据 Go Code Review Guidelines，不推荐使用小的 struct 的传 pointer 参数。尽管 struct 可能不是特别的小，但是，除非你需要对一个 struct 做 in-place 的修改，一般都传 value 参数。</li>
<li>value 的语意可以避免 aliasing（比如，Java 里面的对象都是 reference，传参数就是 aliasing，名字不同但是其实是一个对象）。这样，不会不小心改了一个变量的内容，另一个变量的内容也变了。</li>
<li>有的时候，对小的 struct 传 value 更加高效，可以避免<a href="https://en.wikipedia.org/wiki/Locality_of_reference" target="_blank" rel="nofollow noopener noreferrer">缓存未命中</a>（cache miss）和 heap allocation 开销。</li>
<li>对于 slice，你不需要传 pointer 就能修改其内容。例如，<code>io.Reader.Read(p []byte)</code>会写入小于 p 的长度的 byte 到 p 里。其实，这也是一种"对于小的 struct 传 value"情况的一种特例。由于 slice 的内部实现（参考<a href="http://research.swtch.com/godata" target="_blank" rel="nofollow noopener noreferrer">Russ Cox 的文章</a>），你其实传递的是一个 slice header 的小 struct。</li>
<li>对于需要进行切片操作的 slice（通过<code>s[start:end]</code>修改其 start/end/length/capacity），可模仿<code>append()</code>函数的设计。<code>append()</code>函数接受一个 slice 再返回一个新的 slice。这样的接口避免了 aliasing，并告诉调用方新的 slice 指向 array 可能是重新分配的。</li>
<li>map，channel，string，function value 和 interface value，和 slice 类似，内部实现都是 pointer 或者饱含一些 pointer 的 struct（<a href="http://research.swtch.com/interfaces" target="_blank" rel="nofollow noopener noreferrer">interface 实现</a>）。对他们直接传 value 不会导致对其内容的拷贝。</li>
</ul>
<h2 id="可能需要使用-pointer-的情况" style="position:relative;">可能需要使用 pointer 的情况</h2>
<ul>
<li>如果你编写了一个 function 并且接收一个 struct 的 pointer 来修改其内容，最好让这个 function 成为这个 struct 的 method。大家一般都会默认 struct 的 method 可能会修改其内容，所以 receiver 参数使用 pointer 是最容易让调用方接受的方式。</li>
<li>对于需要修改其 non-receiver 参数内容的函数，最好在 godoc 或者函数命名上明确表达出来。例如，<code>reader.WriteTo(writer)</code>。</li>
<li>
<p>有时，使用传 pointer 来允许调用方复用 struct，减少内存分配是一个好处。但是，当没有出现明显的内存开销的时候，我们可以采用一些方法来避免这种非常有技巧性的 API 设计：</p>
<ol>
<li>为了避免内存分配开销，Go 的逃逸分析（<a href="http://en.wikipedia.org/wiki/Escape_analysis" target="_blank" rel="nofollow noopener noreferrer">escape analysis</a>）可以帮到你。你可以通过使用简单的构造函数、普通的字面值（literal）和有用的 zero value（像 bytes.Buffer）来最大化逃逸分析的优化效果。</li>
<li>考虑给对象加一个 Reset()方法来让对象回到空值的状态。不在乎内存开销的用户也可以不使用这个方法。</li>
<li>考虑即实现一个 modify-in-place 的函数，又实现一个 create-from-scratch 的函数，以供用户使用。例如，<code>existingUser.LoadFromJSON(json []byte) error</code> （从加载内容到一个 user 对象中）和  <code>NewUserFromJSON(json []byte) (*User, error)</code>（创建一个新的 user），其中后一个函数可以利用前一个函数实现。调用方可以根据需要来选择任何一种内存分配方式。</li>
<li>需要循环利用内存的人可以考虑使用<code>sync.Pool</code>来帮助你。如果某个特定的内存分配操作制造了大量的内存压力，你很清楚的知道合适分配的对象不再需要了，但是有没有更好的优化方案，<code>sync.Pool</code>可以很好的解决这个问题。</li>
</ol>
</li>
</ul>
<h2 id="是否使用-slice-of-pointers-s-mystruct" style="position:relative;">是否使用 slice of pointers (<code>s []\*MyStruct</code>)</h2>
<p>一般情况下，slice of values 够用了，也能减少 heap allocation 和 cache miss。但是也有些情况导致必须使用 slice of pointers。</p>
<ul>
<li>构造 API 只允许你获取到 struct 的 pointer。例如，<code>NewFoo() *Foo</code>。</li>
<li>slice 中 struct 的生命周期不相同。由于 slice 内部的 array 是统一回收的。如果只有其中一部分被引用会导致整个 array 不会被释放。</li>
<li>拷贝某些 struct 可能会导致一些问题。使用<code>append()</code>函数时，array 的内容可能会被拷贝到新分配的 array 上。拷贝大的 struct 会很慢，同时有些 struct（例如<code>sync.Mutex</code>）是不允许拷贝的。在 slice 中插入和删除 item 也可能引发类似的拷贝。</li>
</ul>
<p>总的来说，value slices 在你不需要移动 slice 中的内容时，是比较好的选择。或者，你需要确保 slice 中的 value 在拷贝到新的内存上时，不会引发什么问题。</p>
<h2 id="参考" style="position:relative;">参考</h2>
<p>本文内容整理自 <a href="https://stackoverflow.com/a/23551970" target="_blank" rel="nofollow noopener noreferrer">https://stackoverflow.com/a/23551970</a></p></div><ul class="tag-list--UCfMY "><li property="article:tag"><a class="link--3Q175 tag--_yLqr" rel="tag" href="/tags/golang"># <!-- -->golang</a></li></ul><nav class="navigation--3G2Ps"><div class="spacer--377GU"></div></nav></article></main><aside class="sidebar--2yJS5"><header class="static-side--3E7CT " id="static" itemscope="" itemType="http://schema.org/WPHeader"><a class="link--3Q175 title--2hBhH" rel="start" href="/">Ziyi&#x27;s cabin</a><nav class="menu--swfnG" style="display:block"><a class="link--3Q175 menu-link--1VTkB" rel="section" href="/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"></path></svg> <!-- -->首页</a><a class="link--3Q175 menu-link--1VTkB" rel="section" href="/tags"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg> <!-- -->标签</a><a class="link--3Q175 menu-link--1VTkB" rel="section" href="/archive"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"></path></svg> <!-- -->归档</a><a class="link--3Q175 menu-link--1VTkB" rel="section" href="/about"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 288c79.5 0 144-64.5 144-144S335.5 0 256 0 112 64.5 112 144s64.5 144 144 144zm128 32h-55.1c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16H128C57.3 320 0 377.3 0 448v16c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48v-16c0-70.7-57.3-128-128-128z"></path></svg> <!-- -->关于</a></nav></header><div class="sticky-side--2Q6kZ"><ul class="tabs--1B1l1"><li class="active--34YjY">文章目录</li><li class="">站点概览</li></ul><ul class="toc--3GtlT"><li><a href="#tldr" class="">TL;DR</a></li><li><a href="#经常会使用-pointer-的情况" class="">经常会使用 pointer 的情况</a></li><li><a href="#可以不使用-pointer-的情况" class="">可以不使用 pointer 的情况</a></li><li><a href="#可能需要使用-pointer-的情况" class="">可能需要使用 pointer 的情况</a></li><li><a href="#是否使用-slice-of-pointers-s-mystruct" class="">是否使用 slice of pointers (s []\*MyStruct)</a></li><li><a href="#参考" class="">参考</a></li></ul><div class="back--20As2 hide--1Puhl"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"></path></svg></div></div></aside></div><footer class="footer--2ZoPN">©<!-- --> 2019 - <span itemProp="copyrightYear">2020</span><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"></path></svg><span itemProp="copyrightHolder">Ziyi Yan</span></footer></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/pointer-receiver-or-value-receiver-in-go";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-263721de997ffae00c0a.js"],"component---src-404-index-tsx":["/component---src-404-index-tsx-b75330aaee3233358fc1.js"],"component---src-tags-index-tsx":["/component---src-tags-index-tsx-57b668037d3e64afa075.js"],"component---src-tag-tsx":["/component---src-tag-tsx-32cb4847b983a8bbbb65.js"],"component---src-post-index-tsx":["/component---src-post-index-tsx-3c602ad3561b9a91c46a.js"],"component---src-archive-tsx":["/component---src-archive-tsx-3ca62b6c2749a43efa4b.js"],"component---src-index-index-tsx":["/component---src-index-index-tsx-a2d160e7a8101cc7dbf4.js"],"component---src-about-index-tsx":["/component---src-about-index-tsx-0dc9147aae3f5b81afea.js"]};/*]]>*/</script><script src="/component---src-post-index-tsx-3c602ad3561b9a91c46a.js" async=""></script><script src="/commons-8c983014ac1912b8cf32.js" async=""></script><script src="/styles-47484ca0e7b1cc8f32f2.js" async=""></script><script src="/app-263721de997ffae00c0a.js" async=""></script><script src="/webpack-runtime-dbbee36b93e0b48fd1e8.js" async=""></script></body></html>